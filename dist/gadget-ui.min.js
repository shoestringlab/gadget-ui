"use strict";var gadgetui={keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}};document.addEventListener("mousemove",function(e){e=e||window.event,gadgetui.mousePosition=gadgetui.util.mouseCoords(e)}),gadgetui.model=function(){var e={};function t(e,t){this.data=e,this.elements=[],void 0!==t&&this.bind(t)}return t.prototype.handleEvent=function(e){var t,i;switch(e.type){case"change":for(t=0;t<this.elements.length;t++)i=this.elements[t],void 0===e.originalSource&&(e.originalSource="BindableObject.handleEvent['change']"),e.target.name===i.prop&&"BindableObject.updateDomElement"!==e.originalSource&&(e.target.type.match(/select/)?this.change({id:e.target.value,text:e.target.options[e.target.selectedIndex].innerHTML},e,i.prop):this.change(e.target.value,e,i.prop))}},t.prototype.change=function(e,t,i){var n,s;if(void 0===t.originalSource&&(t.originalSource="BindableObject.change"),console.log("change : Source: "+t.originalSource),void 0===i)this.data=e;else{if("object"!=typeof this.data)throw"Attempt to treat a simple value as an object with properties. Change fails.";if(void 0===this.data[i])throw"Property '"+i+"' of object is undefined.";this.data[i]=e}for(n=0;n<this.elements.length;n++)s=this.elements[n],void 0!==i&&i!==s.prop||void 0===t.target||s.elem==t.target||this.updateDomElement(t,s.elem,e)},t.prototype.updateDom=function(e,t,i){var n,s,o;for(void 0===e.originalSource&&(e.originalSource="BindableObject.updateDom"),n=0;n<this.elements.length;n++)if(s=this.elements[n],void 0===i)if("object"==typeof t)for(o in t)this.elements[n].prop===o&&this.updateDomElement(e,s.elem,t[o]);else this.updateDomElement(e,s.elem,t);else s.prop===i&&this.updateDomElement(e,s.elem,t)},t.prototype.updateDomElement=function(e,t,i){var n=function(){switch(t.tagName){case"SELECT":for(;t.firstChild;)t.removeChild(t.firstChild);i.forEach(function(e){var i=document.createElement("option");"object"==typeof e?(i.value=e.id,i.text=e.text):i.text=e,t.appendChild(i),0});break;case"UL":case"OL":for(;t.firstChild;)t.removeChild(t.firstChild);i.forEach(function(e){var i=document.createElement("li");i.textContent=e,t.appendChild(i)})}};if(void 0===e.originalSource&&(e.originalSource="BindableObject.updateDomElement"),"object"==typeof i?"INPUT".indexOf(t.tagName)>=0?t.value=i.id:"OL,UL,SELECT".indexOf(t.tagName)>=0?n():t.textContent=i.text:"INPUT".indexOf(t.tagName)>=0?t.value=i:"OL,UL,SELECT".indexOf(t.tagName)>=0?n():t.textContent=i,"model.set"!==e.originalSource){var s=new Event("change");s.originalSource="model.updateDomElement",t.dispatchEvent(s)}},t.prototype.bind=function(e,t){var i,n=this;void 0===t?(e.value=this.data,i={elem:e,prop:""}):(e.value=this.data[t],i={elem:e,prop:t}),e.addEventListener?e.addEventListener("change",this,!1):e.attachEvent("onpropertychange",function(e){if("value"===e.propertyName){var t=e.srcElement,i="SELECT"===t.nodeName?{id:t.value,text:t.options[t.selectedIndex].innerHTML}:t.value;n.change(i,{target:t},t.name)}}),this.elements.push(i)},{BindableObject:t,create:function(i,n,s){e[i]=void 0!==s?new t(n,s):new t(n)},destroy:function(t){delete e[t]},bind:function(t,i){var n=t.split(".");1===n.length?e[t].bind(i):e[n[0]].bind(i,n[1])},exists:function(t){return!!e.hasOwnProperty(t)},get:function(t){if(null!==t&&void 0!==t){var i=t.split(".");try{if(1===i.length){if(void 0===e[t])throw"Key '"+t+"' does not exist in the model.";return e[t].data}if(void 0===e[i[0]])throw"Key '"+i[0]+"' does not exist in the model.";return e[i[0]].data[i[1]]}catch(e){return void console.log(e)}}else console.log("Expected parameter [name] is not defined.")},set:function(t,i){if(null!==t&&void 0!==t){var n=t.split("."),s={originalSource:"model.set"};if(!1===this.exists(n[0])){if(1!==n.length)throw"Object "+n[0]+"is not yet initialized.";this.create(t,i)}else 1===n.length?(e[t].change(i,s),e[t].updateDom(s,i)):(e[n[0]].change(i,s,n[1]),e[n[0]].updateDom(s,i,n[1]))}else console.log("Expected parameter [name] is not defined.")}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var i,n,s,o,a=Object(this),r=a.length>>>0;if("function"!=typeof e)throw new TypeError;for(i=t||void 0,n=0;n<r;)s=n.toString(),a.hasOwnProperty(s)&&(o=a[s],e.call(i,o,n,a)),n+=1}),gadgetui.display=function(){function e(e){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.config(e),this.bubble={x:0,y:0,width:0,height:0,arrowPosition:"topleft",arrowAngle:315,text:"",padding:10,fontSize:this.fontSize,fontStyle:this.fontStyle,fontWeight:this.fontWeight,fontVariant:this.fontVariant,font:this.font,color:this.color,borderWidth:this.borderWidth,borderColor:this.borderColor,backgroundColor:this.backgroundColor,justifyText:this.justifyText,lineHeight:this.lineHeight,align:this.align,vAlign:this.vAlign}}function t(e,t){this.element=e,this.config(t),this.addControl(),this.addCSS(),this.addHeader(),this.icon=this.wrapper.querySelector("div.oi"),this.addBindings(),this.height=this.wrapper.offsetHeight,this.headerHeight=this.header.offsetHeight,this.selectorHeight=this.element.offsetHeight,this.toggle()}function i(e,t){var i=gadgetui.util.setStyle;if(null!==e)this.element=e;else{let e=document.createElement("div");e.setAttribute("id","gadgetui-dialog-"+Math.random()),void 0!==t.width&&i(e,"width",t.width),document.querySelector("body").append(e),this.element=e}void 0!==t&&(this.config(t),this.buttons=void 0!==t.buttons?t.buttons:[]),this.setup(t),this.addButtons()}function n(e,t){var i,n,s,o=gadgetui.objects.EventBindings.getAll();for(s={id:n=gadgetui.util.Id(),filename:e.name,width:gadgetui.util.getStyle(t,"width")},this.file=e,this.id=n,this.progressbar=new gadgetui.display.ProgressBar(t,s),this.progressbar.render(),i=0;i<o.length;i++)this[o[i].name]=o[i].func}function s(e,t){this.element=e,void 0!==t&&this.config(t),this.setup(t)}function o(e,t){this.element=e,this.config(t),this.addControl(),this.updateImage()}function a(e,t){this.element=e,this.elements=[],this.config(t),void 0!==this.datasource?this.retrieveData():(void 0!==this.data&&this.addControl(),this.addBindings())}function r(e,t){this.element=e,this.config(t),this.addControl(),this.addBindings()}function l(e,t){this.element=e,this.configure(t)}function d(e,t){this.selector=e,this.minimized=!1,this.config(t),this.addControl(),this.addBindings(t)}function h(e,t){this.element=e,this.tabsDiv=this.element.querySelector("div"),this.config(t),this.addControl()}return e.prototype.config=function(e){e=void 0===e?{}:e,this.color=void 0===e.color?"#000":e.color,this.borderWidth=void 0===e.borderWidth?1:e.borderWidth,this.borderColor=void 0===e.borderColor?"#000":e.borderColor,this.backgroundColor=void 0===e.backgroundColor?"#f0f0f0":e.backgroundColor,this.fontSize=void 0===e.fontSize?14:e.fontSize,this.font=void 0===e.font?"Arial":e.font,this.fontStyle=void 0===e.fontStyle?"":e.fontStyle,this.fontWeight=void 0===e.fontWeight?100:e.fontWeight,this.fontVariant=void 0===e.fontVariant?"":e.fontVariant,this.lineHeight=void 0===e.lineHeight?null:e.lineHeight,this.align=void 0===e.align?"center":e.align,this.vAlign=void 0===e.vAlign?"middle":e.vAlign,this.justifyText=void 0!==e.justifyText&&e.justifyText},e.prototype.events=["rendered"],e.prototype.setBubble=function(e,t,i,n,s,o,a){this.bubble.x=e,this.bubble.y=t,this.bubble.width=i,this.bubble.height=n,this.setArrow(s,o,a),this.calculateBoundingRect();const r=this.getBoundingClientRect();this.canvas.height=r.height,this.canvas.width=r.width,document.querySelector("body").appendChild(this.canvas)},e.prototype.setText=function(e){this.bubble.text=e},e.prototype.setPosition=function(e,t){this.bubble.x=e,this.bubble.y=t},e.prototype.setArrow=function(e,t,i){this.setArrowLength(t),this.setArrowPosition(e),this.setArrowAngle(i),this.setArrowComponents(),this.setArrowVector()},e.prototype.setArrowPosition=function(e){switch(this.bubble.arrowPosition=e,this.bubble.arrowPosition){case"top":this.bubble.arrowX=this.bubble.x+this.bubble.width/2,this.bubble.arrowY=this.bubble.y;break;case"topright":this.bubble.arrowX=this.bubble.x+this.bubble.width,this.bubble.arrowY=this.bubble.y;break;case"right":this.bubble.arrowX=this.bubble.x+this.bubble.width,this.bubble.arrowY=this.bubble.y+this.bubble.height/2;break;case"bottomright":this.bubble.arrowX=this.bubble.x+this.bubble.width,this.bubble.arrowY=this.bubble.y+this.bubble.height;break;case"bottom":this.bubble.arrowX=this.bubble.x+this.bubble.width/2,this.bubble.arrowY=this.bubble.y+this.bubble.height;break;case"bottomleft":this.bubble.arrowX=this.bubble.x,this.bubble.arrowY=this.bubble.y+this.bubble.height;break;case"left":this.bubble.arrowX=this.bubble.x,this.bubble.arrowY=this.bubble.y+this.bubble.height/2;break;case"topleft":default:this.bubble.arrowX=this.bubble.x,this.bubble.arrowY=this.bubble.y}},e.prototype.setArrowAngle=function(e){switch(this.bubble.arrowAngle=e,this.bubble.arrowPosition){case"top":e<280&&e>80&&(console.error("Angle must be 280-360 or 0-80 degrees."),this.bubble.arrowAngle=0);break;case"topright":e<10&&e>80&&(console.error("Angle must be between 10 and 80 degrees."),this.bubble.arrowAngle=45);break;case"right":e<10&&e>170&&(console.error("Angle must be between 10 and 170 degrees."),this.bubble.arrowAngle=90);break;case"bottomright":e<100&&e>170&&(console.error("Angle must be between 100 and 170 degrees."),this.bubble.arrowAngle=180);break;case"bottom":e<100&&e>260&&(console.error("Angle must be between 100 and 260 degrees."),this.bubble.arrowAngle=180);break;case"bottomleft":e<190&&e>260&&(console.error("Angle must be between 190 and 260 degrees."),this.bubble.arrowAngle=225);break;case"left":e<190&&e>350&&(console.error("Angle must be between 190 and 350 degrees."),this.bubble.arrowAngle=270);break;case"topleft":e<280&&e>80&&(console.error("Angle must be between 280 and 80 degrees."),this.bubble.arrowAngle=315);break;default:this.bubble.arrowAngle=315}},e.prototype.setArrowLength=function(e){this.bubble.arrowLength=e},e.prototype.setArrowComponents=function(){const e=Math.abs(this.bubble.arrowAngle-90)*Math.PI/180;this.bubble.arrowDx=Math.round(this.bubble.arrowLength*Math.cos(e)),this.bubble.arrowDy=Math.round(this.bubble.arrowLength*Math.sin(e))},e.prototype.setArrowVector=function(){this.bubble.arrowAngle>=0&&this.bubble.arrowAngle<=90?(this.bubble.arrowEndX=this.bubble.arrowX+this.bubble.arrowDx,this.bubble.arrowEndY=this.bubble.arrowY-this.bubble.arrowDy):this.bubble.arrowAngle>=90&&this.bubble.arrowAngle<=180?(this.bubble.arrowEndX=this.bubble.arrowX+this.bubble.arrowDx,this.bubble.arrowEndY=this.bubble.arrowY+this.bubble.arrowDy):this.bubble.arrowAngle>=180&&this.bubble.arrowAngle<=270?(this.bubble.arrowEndX=this.bubble.arrowX+this.bubble.arrowDx,this.bubble.arrowEndY=this.bubble.arrowY+this.bubble.arrowDy):this.bubble.arrowAngle>=270&&this.bubble.arrowAngle<=360&&(this.bubble.arrowEndX=this.bubble.arrowX+this.bubble.arrowDx,this.bubble.arrowEndY=this.bubble.arrowY+this.bubble.arrowDy)},e.prototype.calculateBoundingRect=function(){this.bubble.top=Math.min(this.bubble.y,this.bubble.arrowEndY)-Math.floor(this.bubble.borderWidth/2),this.bubble.left=Math.min(this.bubble.x,this.bubble.arrowEndX)-Math.floor(this.bubble.borderWidth/2),this.bubble.right=Math.max(this.bubble.x+this.bubble.width,this.bubble.arrowEndX)+Math.floor(this.bubble.borderWidth/2),this.bubble.bottom=Math.max(this.bubble.y+this.bubble.height,this.bubble.arrowEndY)+Math.floor(this.bubble.borderWidth/2)},e.prototype.getBoundingClientRect=function(){return{top:this.bubble.top,left:this.bubble.left,bottom:this.bubble.bottom,right:this.bubble.right,height:this.bubble.bottom-this.bubble.top,width:this.bubble.right-this.bubble.left}},e.prototype.render=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle=this.bubble.backgroundColor,this.ctx.strokeStyle=this.bubble.borderColor,this.ctx.lineWidth=this.bubble.borderWidth;let e=this.bubble.x,t=this.bubble.y;this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(e,t+this.bubble.height),this.ctx.lineTo(e+this.bubble.width,t+this.bubble.height),this.ctx.lineTo(e+this.bubble.width,t),this.ctx.lineTo(e,t),this.ctx.closePath(),this.ctx.moveTo(this.bubble.arrowX,this.bubble.arrowY),this.ctx.lineTo(this.bubble.arrowEndX,this.bubble.arrowEndY),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle=this.bubble.color;const i={x:e+this.bubble.padding,y:t+this.bubble.padding,width:this.bubble.width-2*this.bubble.padding-2*this.bubble.borderWidth,height:this.bubble.height-2*this.bubble.padding-2*this.bubble.borderWidth,fontSize:this.bubble.fontSize,justify:this.bubble.justifyText,align:this.bubble.align,vAlign:this.bubble.vAlign,font:this.bubble.font,fontStyle:this.bubble.fontStyle,fontWeight:this.bubble.fontWeight,fontVariant:this.bubble.fontVariant,font:this.bubble.font,lineHeight:this.bubble.lineHeight};gadgetui.util.drawText(this.ctx,this.bubble.text,i)},e.prototype.attachToElement=function(e,t){const i=e;if(!i)return;const n=i.getBoundingClientRect(),s=this.canvas.getBoundingClientRect();this.canvas.getContext("2d");switch(t){case"top":this.canvas.style.left=n.left+(n.right-n.left)/2+"px",this.canvas.style.top=n.top+"px";break;case"topright":this.canvas.style.left=n.right+"px",this.canvas.style.top=-this.bubble.padding+"px";break;case"right":this.canvas.style.left=n.right+"px",this.canvas.style.top=n.top/2+(n.bottom-n.top)/2+"px";break;case"bottomright":this.canvas.style.left=n.right+"px",this.canvas.style.top=n.bottom+"px";break;case"bottom":this.canvas.style.left=n.left+(n.right-n.left)/2+"px",this.canvas.style.top=n.bottom+"px";break;case"bottomleft":this.canvas.style.left=n.left-s.width+"px",this.canvas.style.top=n.bottom+"px";break;case"left":this.canvas.style.left=n.left-s.width+"px",this.canvas.style.top=n.top-(n.bottom-n.top)/2+"px";break;case"topleft":this.canvas.style.left=n.left-s.width+"px",this.canvas.style.top=n.top-s.height+"px"}this.canvas.style.position="absolute"},e.prototype.destroy=function(){document.querySelector("body").removeChild(this.canvas)},t.prototype.events=["minimized","maximized"],t.prototype.addControl=function(){var e=document.createElement("div");this.class&&gadgetui.util.addClass(e,this.class),gadgetui.util.addClass(e,"gadget-ui-collapsiblePane"),this.element.parentNode.insertBefore(e,this.element),this.wrapper=this.element.previousSibling,this.element.parentNode.removeChild(this.element),e.appendChild(this.element)},t.prototype.addHeader=function(){gadgetui.util.setStyle;var e,t=document.createElement("div");gadgetui.util.addClass(t,"gadget-ui-collapsiblePane-header"),this.headerClass&&gadgetui.util.addClass(t,this.headerClass),t.innerHTML=this.title,this.wrapper.insertBefore(t,this.element),this.header=this.headerClass?this.wrapper.querySelector("div."+this.headerClass):this.wrapper.querySelector("div.gadget-ui-collapsiblePane-header"),e=document.createElement("div"),this.header.appendChild(e)},t.prototype.addCSS=function(){var e=this.width,t=gadgetui.util.setStyle;t(this.wrapper,"width",e),t(this.wrapper,"overflow","hidden")},t.prototype.addBindings=function(){var e=this;(this.headerClass?this.wrapper.querySelector("div."+this.headerClass):this.wrapper.querySelector("div.gadget-ui-collapsiblePane-header")).addEventListener("click",function(){e.toggle()})},t.prototype.toggle=function(){var e,t,i,n=this,s=gadgetui.util.setStyle;!0===this.collapsed?("",t="block",e=this.height,i=this.selectorHeight,this.collapsed=!1):("",t="none",e=this.headerHeight,i=0,this.collapsed=!0),this.eventName=this.collapsed?"collapse":"expand",this.newEventName=this.collapsed?"minimized":"maximized";var o=new Event(this.eventName);this.element.dispatchEvent(o),"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{height:e},{queue:!1,duration:n.delay,complete:function(){}}),Velocity(this.element,{height:i},{queue:!1,duration:n.delay,complete:function(){"function"==typeof n.fireEvent&&n.fireEvent(n.newEventName)}})):s(this.element,"display",t)},t.prototype.config=function(e){e=void 0===e?{}:e,this.animate=void 0===e.animate||e.animate,this.delay=void 0===e.delay?300:e.delay,this.title=void 0===e.title?"":e.title,this.width=gadgetui.util.getStyle(this.element,"width"),this.collapse=void 0!==e.collapse&&e.collapse,this.collapsed=void 0===e.collapse||!e.collapse,this.class=void 0!==e.class&&e.class,this.headerClass=void 0!==e.headerClass&&e.headerClass},i.prototype=s.prototype,i.prototype.addButtons=function(){var e=this,t=gadgetui.util.setStyle;this.buttonDiv=document.createElement("div"),t(this.buttonDiv,"text-align","center"),t(this.buttonDiv,"padding",".5em"),this.buttons.forEach(function(i){var n=document.createElement("button");n.innerText=i.label,t(n,"margin",".5em"),n.addEventListener("click",i.click),e.buttonDiv.appendChild(n)}),this.wrapper.appendChild(this.buttonDiv)},n.prototype.events=["uploadComplete","uploadAborted"],n.prototype.completeUpload=function(e){let t=function(){this.progressbar.destroy(),this.fireEvent("uploadComplete",e)}.bind(this);setTimeout(t,1e3)},n.prototype.abortUpload=function(e){let t=function(){this.progressbar.destroy(),this.fireEvent("uploadAborted",e)}.bind(this);setTimeout(t,1e3)},s.prototype.events=["minimized","maximized","moved","closed"],s.prototype.setup=function(e){this.setMessage(),this.addControl(),this.addHeader(),this.enableShrink&&(this.maxmin=this.wrapper.querySelector("div.oi[name='maxmin']")),this.minWidth=this.title.length>0?gadgetui.util.textWidth(this.title,this.header.style)+80:100;var t=2*parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.element,"padding")),10),i=gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.header,"height"))+6;gadgetui.util.setStyle(this.element,"width",this.width-t),this.height=void 0===e.height?gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.element,"height"))+t+i+10:e.height,this.addCSS(),this.height=gadgetui.util.getStyle(this.wrapper,"height"),this.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(this.element).left,this.addBindings()},s.prototype.setMessage=function(){void 0!==this.message&&(this.element.innerText=this.message)},s.prototype.addBindings=function(){gadgetui.util.draggable(this.wrapper);this.wrapper.addEventListener("drag_end",function(e){this.top=e.detail.top,this.left=e.detail.left,this.relativeOffsetLeft=gadgetui.util.getRelativeParentOffset(this.element).left,"function"==typeof this.fireEvent&&this.fireEvent("moved")}.bind(this)),this.enableShrink&&this.shrinker.addEventListener("click",function(e){e.stopPropagation(),this.minimized?this.expand():this.minimize()}.bind(this)),this.enableClose&&this.closer.addEventListener("click",function(e){e.stopPropagation(),this.close()}.bind(this))},s.prototype.close=function(){"function"==typeof this.fireEvent&&this.fireEvent("closed"),this.wrapper.parentNode.removeChild(this.wrapper)},s.prototype.addHeader=function(){var e=gadgetui.util.setStyle;if(this.header=document.createElement("div"),this.header.innerHTML=this.title,this.headerClass&&gadgetui.util.addClass(header,this.headerClass),gadgetui.util.addClass(this.header,"gadget-ui-floatingPane-header"),this.enableShrink){this.shrinker=document.createElement("span"),this.shrinker.setAttribute("name","maxmin"),e(this.shrinker,"float","left"),e(this.shrinker,"margin-right",".5em");var t=`<svg class="feather">\n\t\t\t\t\t\t\t\t<use xlink:href="${this.featherPath}/dist/feather-sprite.svg#minimize"/>\n\t\t\t\t\t\t\t\t</svg>`;this.shrinker.innerHTML=t,this.header.insertBefore(this.shrinker,void 0),this.wrapper.insertBefore(this.header,this.element),this.header.appendChild(this.shrinker)}else this.wrapper.insertBefore(this.header,this.element);if(this.enableClose){var i=document.createElement("span");i.setAttribute("name","closeIcon"),e(i,"float","right");var n=`<svg class="feather">\n\t\t\t\t\t\t\t\t<use xlink:href="${this.featherPath}/dist/feather-sprite.svg#x-circle"/>\n\t\t\t\t\t\t\t\t</svg>`;i.innerHTML=n,this.header.appendChild(i),e(i,"right","3px"),e(i,"position","absolute"),e(i,"cursor","pointer"),e(i,"top","3px"),this.closer=i}},s.prototype.addCSS=function(){var e=gadgetui.util.setStyle;e(this.wrapper,"width",this.width),e(this.wrapper,"z-index",this.zIndex),this.backgroundColor.length&&e(this.wrapper,"background-color",this.backgroundColor),void 0!==this.top&&e(this.wrapper,"top",this.top),void 0!==this.left&&e(this.wrapper,"left",this.left),void 0!==this.bottom&&e(this.wrapper,"bottom",this.bottom),void 0!==this.right&&e(this.wrapper,"right",this.right)},s.prototype.addControl=function(){var e=document.createElement("div");this.class&&gadgetui.util.addClass(e,this.class),gadgetui.util.addClass(e,"gadget-ui-floatingPane"),e.draggable=!0,this.element.parentNode.insertBefore(e,this.element),this.wrapper=this.element.previousSibling,this.element.parentNode.removeChild(this.element),e.appendChild(this.element)},s.prototype.expand=function(){var e=this,t=gadgetui.util.setStyle,i=gadgetui.util.getOffset(this.wrapper),n=parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.wrapper.parentElement,"padding-left")),10),s=(parseInt(new Number(i.left),10),this.relativeOffsetLeft,`<svg class="feather">\n\t\t\t\t\t\t\t\t<use xlink:href="${this.featherPath}/dist/feather-sprite.svg#minimize"/>\n\t\t\t\t\t\t\t\t</svg>`);"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{width:this.width},{queue:!1,duration:500},function(){}),Velocity(this.element,{height:this.height},{queue:!1,duration:500,complete:function(){e.shrinker.innerHTML=s,t(e.element,"overflow","scroll"),"function"==typeof e.fireEvent&&e.fireEvent("maximized")}})):(t(this.wrapper,"width",this.width),t(this.element,"height",this.height),this.shrinker.innerHTML=s,t(this.element,"overflow","scroll"),"function"==typeof this.fireEvent&&this.fireEvent("maximized")),this.minimized=!1},s.prototype.minimize=function(){var e=this,t=gadgetui.util.setStyle,i=gadgetui.util.getOffset(this.wrapper),n=parseInt(gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.wrapper.parentElement,"padding-left")),10);parseInt(new Number(i.left),10),this.relativeOffsetLeft,parseInt(gadgetui.util.getNumberValue(this.width),10);t(this.element,"overflow","hidden");var s=`<svg class="feather">\n\t\t\t\t\t\t\t<use xlink:href="${this.featherPath}/dist/feather-sprite.svg#maximize"/>\n\t\t\t\t\t\t\t</svg>`;"undefined"!=typeof Velocity&&this.animate?(Velocity(this.wrapper,{width:e.minWidth},{queue:!1,duration:e.delay,complete:function(){e.shrinker.innerHTML=s}}),Velocity(this.element,{height:"50px"},{queue:!1,duration:e.delay},function(){"function"==typeof e.fireEvent&&e.fireEvent("minimized")})):(t(this.wrapper,"width",this.minWidth),t(this.element,"height","50px"),this.shrinker.innerHTML=s,"function"==typeof this.fireEvent&&this.fireEvent("minimized")),this.minimized=!0},s.prototype.config=function(e){e=void 0===e?{}:e,this.message=void 0===e.message?void 0:e.message,this.animate=void 0===e.animate||e.animate,this.delay=void 0===e.delay?500:e.delay,this.title=void 0===e.title?"":e.title,this.backgroundColor=void 0===e.backgroundColor?"":e.backgroundColor,this.zIndex=void 0===e.zIndex?gadgetui.util.getMaxZIndex()+1:e.zIndex,this.width=gadgetui.util.getStyle(this.element,"width"),this.top=void 0===e.top?void 0:e.top,this.left=void 0===e.left?void 0:e.left,this.bottom=void 0===e.bottom?void 0:e.bottom,this.right=void 0===e.right?void 0:e.right,this.class=void 0!==e.class&&e.class,this.headerClass=void 0!==e.headerClass&&e.headerClass,this.featherPath=e.featherPath||"/node_modules/feather-icons",this.minimized=!1,this.relativeOffsetLeft=0,this.enableShrink=void 0===e.enableShrink||e.enableShrink,this.enableClose=void 0===e.enableClose||e.enableClose},o.prototype.events=["showPrevious","showNext"],o.prototype.config=function(e){this.images=e.images,this.currentIndex=0,this.featherPath=e.featherPath||"/node_modules/feather-icons",this.time=e.time||3e3,this.enableModal=void 0===e.enableModal||e.enableModal},o.prototype.addControl=function(){gadgetui.util.addClass(this.element,"gadgetui-lightbox"),this.imageContainer=document.createElement("div"),gadgetui.util.addClass(this.imageContainer,"gadgetui-lightbox-image-container"),this.spanPrevious=document.createElement("span"),this.spanNext=document.createElement("span"),gadgetui.util.addClass(this.spanPrevious,"gadgetui-lightbox-previousControl"),gadgetui.util.addClass(this.spanNext,"gadgetui-lightbox-nextControl"),this.spanPrevious.innerHTML=`<svg class="feather" name="chevron">\n      <use xlink:href="${this.featherPath}/dist/feather-sprite.svg#chevron-left"/>\n    </svg>`,this.spanNext.innerHTML=`<svg class="feather" name="chevron">\n      <use xlink:href="${this.featherPath}/dist/feather-sprite.svg#chevron-right"/>\n    </svg>`,this.element.appendChild(this.spanPrevious),this.element.appendChild(this.imageContainer),this.element.appendChild(this.spanNext),this.spanPrevious.addEventListener("click",function(e){this.prevImage()}.bind(this)),this.spanNext.addEventListener("click",function(e){this.nextImage()}.bind(this)),this.enableModal&&(this.modal=document.createElement("div"),gadgetui.util.addClass(this.modal,"gadgetui-lightbox-modal"),gadgetui.util.addClass(this.modal,"gadgetui-hidden"),this.modalImageContainer=document.createElement("div"),this.modal.appendChild(this.modalImageContainer),gadgetui.util.addClass(this.modalImageContainer,"gadgetui-lightbox-modal-imagecontainer"),document.querySelector("body").appendChild(this.modal),this.imageContainer.addEventListener("click",function(e){this.setModalImage(),gadgetui.util.addClass(this.element,"gadgetui-hidden"),gadgetui.util.removeClass(this.modal,"gadgetui-hidden"),this.stopAnimation()}.bind(this)),this.modal.addEventListener("click",function(e){gadgetui.util.addClass(this.modal,"gadgetui-hidden"),gadgetui.util.removeClass(this.element,"gadgetui-hidden"),this.animate()}.bind(this)))},o.prototype.nextImage=function(){this.currentIndex=(this.currentIndex+1)%this.images.length,this.updateImage()},o.prototype.prevImage=function(){this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length,this.updateImage()},o.prototype.updateImage=function(){this.imageContainer.innerHTML=`<img style="height:100%;width:100%;" src="${this.images[this.currentIndex]}" alt="Image ${this.currentIndex+1}">`},o.prototype.animate=function(){this.interval=setInterval(function(){this.nextImage()}.bind(this),this.time)},o.prototype.stopAnimation=function(){clearInterval(this.interval)},o.prototype.setModalImage=function(){this.modalImageContainer.innerHTML=`<img style="height:100%;width:100%;" src="${this.images[this.currentIndex]}" alt="Image ${this.currentIndex+1}">`},a.prototype.events=["clicked"],a.prototype.retrieveData=function(){this.datasource().then(function(e){this.data=e,this.addControl()}.bind(this))},a.prototype.addControl=function(){let e=function(e,i){let n=void 0!==e.label?e.label:"",s=document.createElement("div");s.classList.add("gadget-ui-menu-item"),s.innerText=n;let o=void 0!==e.image?e.image:"";if(o.length){let e=document.createElement("img");e.src=o,e.classList.add("gadget-ui-menu-icon"),s.appendChild(e)}return void 0!==e.link&&null!==e.link&&(e.link.length>0||"function"==typeof e.link)&&(s.style.cursor="pointer",s.addEventListener("click",function(){"function"==typeof this.fireEvent&&this.fireEvent("clicked",e),"function"==typeof e.link?e.link():window.open(e.link)}.bind(this))),void 0!==e.menuItem&&s.appendChild(t(e.menuItem,s)),s}.bind(this),t=function(t,i){let n=document.createElement("div");return n.classList.add("gadget-ui-menu-menuItem"),t.items.forEach(function(t){n.appendChild(e(t,n))}),n};this.data.forEach(function(e){let i=function(e){let i=document.createElement("div");i.classList.add("gadget-ui-menu");let n=void 0!==e.label?e.label:"";i.innerText=n;let s=void 0!==e.image?e.image:"";if(s.length){let e=document.createElement("img");e.src=s,e.classList.add("gadget-ui-menu-icon"),i.appendChild(e)}return i.appendChild(t(e.menuItem,i)),i}(e);this.element.appendChild(i),this.elements.push(i)}.bind(this))},a.prototype.addBindings=function(){this.element.querySelectorAll(".gadget-ui-menu").forEach(function(e){let t=e.querySelector("div[class='gadget-ui-menu-menuItem']"),i=t.querySelectorAll("div[class='gadget-ui-menu-item']"),n=t.querySelectorAll("div[class='gadget-ui-menu-menuItem']");i.forEach(function(e){let t=e.querySelector("div[class='gadget-ui-menu-menuItem']");e.addEventListener("mouseenter",function(i){null!==t&&t.classList.add("gadget-ui-menu-hovering"),e.classList.add("gadget-ui-menu-selected");let n=e.parentNode.children;for(var s=0;s<n.length;s++)n[s]!==e&&n[s].classList.remove("gadget-ui-menu-selected");i.preventDefault()}),e.addEventListener("mouseleave",function(e){null!==t&&t.classList.remove("gadget-ui-menu-hovering")})}),e.addEventListener("mouseenter",function(e){t.classList.add("gadget-ui-menu-hovering")}),e.addEventListener("mouseleave",function(e){t.classList.remove("gadget-ui-menu-hovering")}),n.forEach(function(e){e.addEventListener("mouseenter",function(t){e.classList.add("gadget-ui-menu-hovering")}),e.addEventListener("mouseleave",function(t){e.parentNode.classList.toString().indexOf("selected")<0&&e.classList.remove("gadget-ui-menu-hovering")})})})},a.prototype.destroy=function(){let e=this.element.querySelectorAll("div.gadget-ui-menu");for(var t=0;t<e.length;t++)document.querySelector(this.element).removeChild(e[t])},a.prototype.config=function(e){this.data=void 0!==e.data?e.data:void 0,this.datasource=void 0!==e.datasource?e.datasource:void 0},r.prototype.events=["opened","closed"],r.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.class&&gadgetui.util.addClass(this.wrapper,this.class),gadgetui.util.addClass(this.wrapper,"gadgetui-modal"),this.element.parentNode.insertBefore(this.wrapper,this.element),this.element.parentNode.removeChild(this.element),this.wrapper.appendChild(this.element);var e="";e=this.closeIcon.indexOf("svg")>0?'<svg class="'+this.featherClass+'"><use xlink:href="'+this.closeIcon+'"/></svg>':'<img src="'+this.closeIcon+'"/>',gadgetui.util.addClass(this.element,"gadgetui-modalWindow"),this.element.innerHTML=`<span name="close" class="gadgetui-right-align">\n              <a name="close">\n              ${e}\n              </a>\n              </span>`+this.element.innerHTML,this.autoOpen&&this.open()},r.prototype.addBindings=function(){let e=this;this.element.querySelector(" a[name='close']").addEventListener("click",function(t){e.close()})},r.prototype.open=function(){gadgetui.util.addClass(this.wrapper,"gadgetui-showModal"),"function"==typeof this.fireEvent&&this.fireEvent("opened")},r.prototype.close=function(){gadgetui.util.removeClass(this.wrapper,"gadgetui-showModal"),"function"==typeof this.fireEvent&&this.fireEvent("closed")},r.prototype.destroy=function(){this.element.parentNode.removeChild(this.element),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),this.wrapper.parentNode.removeChild(this.wrapper),this.element.removeChild(this.element.querySelector(".gadgetui-right-align"))},r.prototype.config=function(e){this.class=void 0!==e.class&&e.class,this.featherClass=void 0===e.featherClass?"feather":e.featherClass,this.closeIcon=void 0===e.closeIcon?"/node_modules/feather-icons/dist/feather-sprite.svg#x-circle":e.closeIcon,this.autoOpen=!1!==e.autoOpen},l.prototype.configure=function(e){this.id=e.id,this.label=e.label,this.width=e.width},l.prototype.events=["start,updatePercent,update"],l.prototype.render=function(){gadgetui.util.setStyle;var e=document.createElement("div");e.setAttribute("name","progressbox_"+this.id),gadgetui.util.addClass(e,"gadgetui-progressbar-progressbox"),this.element.appendChild(e);var t=document.createElement("div");t.setAttribute("name","label"),gadgetui.util.addClass(t,"gadgetui-progressbar-label"),t.innerText=" "+this.label+" ",e.appendChild(t);var i=document.createElement("div");gadgetui.util.addClass(i,"gadget-ui-progressbar"),i.setAttribute("name","progressbar_"+this.id),e.appendChild(i);var n=document.createElement("div");n.setAttribute("name","statustxt"),gadgetui.util.addClass(n,"statustxt"),n.innertText="0%",e.appendChild(n),this.progressbox=this.element.querySelector("div[name='progressbox_"+this.id+"']"),this.progressbar=this.element.querySelector("div[name='progressbar_"+this.id+"']"),this.statustxt=this.element.querySelector("div[name='progressbox_"+this.id+"'] div[name='statustxt']")},l.prototype.start=function(){(0,gadgetui.util.setStyle)(this.progressbar,"width","0"),this.statustxt.innerHTML="0%"},l.prototype.updatePercent=function(e){var t=gadgetui.util.setStyle,i=e+"%";this.percent=e,t(this.progressbar,"width",i),this.statustxt.innerHTML=i},l.prototype.update=function(e){this.statustxt.innerHTML=e},l.prototype.destroy=function(){this.progressbox.parentNode.removeChild(this.progressbox)},d.prototype.events=["maximized","minimized"],d.prototype.config=function(e){this.class=void 0!==e.class&&e.class,this.featherPath=e.featherPath||"/node_modules/feather-icons",this.animate=void 0===e.animate||e.animate,this.delay=void 0===e.delay?300:e.delay,this.toggleTitle=void 0===e.toggleTitle?"Toggle Sidebar":e.toggleTitle},d.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.class&&gadgetui.util.addClass(this.wrapper,this.class),gadgetui.util.addClass(this.wrapper,"gadgetui-sidebar"),this.span=document.createElement("span"),this.span.setAttribute("title",this.toggleTitle),gadgetui.util.addClass(this.span,"gadgetui-right-align"),gadgetui.util.addClass(this.span,"gadgetui-sidebar-toggle"),this.span.innerHTML=`<svg class="feather" name="chevron">\n      <use xlink:href="${this.featherPath}/dist/feather-sprite.svg#chevron-left"/>\n    </svg>`,this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.selector.parentNode.removeChild(this.selector),this.wrapper.appendChild(this.selector),this.wrapper.insertBefore(this.span,this.selector),this.width=this.wrapper.offsetWidth},d.prototype.maximize=function(){let e=this;e.minimized=!1,e.setChevron(e.minimized),gadgetui.util.removeClass(e.wrapper,"gadgetui-sidebar-minimized"),"undefined"!=typeof Velocity&&this.animate?Velocity(e.wrapper,{width:e.width},{queue:!1,duration:e.delay,complete:function(){gadgetui.util.removeClass(e.selector,"gadgetui-sidebarContent-minimized"),"function"==typeof e.fireEvent&&e.fireEvent("maximized")}}):(gadgetui.util.removeClass(e.selector,"gadgetui-sidebarContent-minimized"),"function"==typeof e.fireEvent&&e.fireEvent("maximized"))},d.prototype.minimize=function(){let e=this;e.minimized=!0,e.setChevron(e.minimized),gadgetui.util.addClass(e.selector,"gadgetui-sidebarContent-minimized"),"undefined"!=typeof Velocity&&e.animate?Velocity(e.wrapper,{width:25},{queue:!1,duration:e.delay,complete:function(){gadgetui.util.addClass(e.wrapper,"gadgetui-sidebar-minimized"),"function"==typeof e.fireEvent&&e.fireEvent("minimized")}}):(gadgetui.util.addClass(e.wrapper,"gadgetui-sidebar-minimized"),"function"==typeof e.fireEvent&&e.fireEvent("minimized"))},d.prototype.addBindings=function(e){let t=this;this.span.addEventListener("click",function(e){t.minimized?t.maximize():t.minimize()}),e.minimized&&t.minimize()},d.prototype.setChevron=function(e){let t=e?"chevron-right":"chevron-left";this.wrapper.querySelector("svg").innerHTML=`<use xlink:href="${this.featherPath}/dist/feather-sprite.svg#${t}"/>`},h.prototype.config=function(e){this.direction=void 0===e.direction?"horizontal":e.direction,this.tabContentDivIds=[],this.tabs=[],this.activeTab},h.prototype.events=["tabSelected"],h.prototype.addControl=function(){let e="vertical"===this.direction?"v":"h";this.tabsDiv.classList.add("gadget-ui-tabs-"+e),this.tabs=this.tabsDiv.querySelectorAll("div");let t=!1;this.tabs.forEach(function(i){i.classList.add("gadget-ui-tab-"+e),t||(t=!0,this.setActiveTab(i.attributes["data-tab"].value)),this.tabContentDivIds.push(i.attributes["data-tab"].value),this.element.querySelector("div[name='"+i.attributes["data-tab"].value+"']").style.display="none",i.addEventListener("click",function(){this.setActiveTab(i.attributes["data-tab"].value)}.bind(this))}.bind(this)),this.element.querySelector("div[name='"+this.tabContentDivIds[0]+"']").style.display="block"},h.prototype.setActiveTab=function(e){let t="vertical"===this.direction?"v":"h";this.tabContentDivIds.forEach(function(t){let i=t===e?"block":"none";this.element.querySelector("div[name='"+t+"']").style.display=i}.bind(this)),this.tabs.forEach(function(i){i.attributes["data-tab"].value===e?i.classList.add("gadget-ui-tab-"+t+"-active"):i.classList.remove("gadget-ui-tab-"+t+"-active")}.bind(this)),this.activeTab=e,void 0!==this.events.tabSelected&&this.fireEvent("tabSelected",e)},{Bubble:e,CollapsiblePane:t,Dialog:i,FileUploadWrapper:n,FloatingPane:s,Menu:a,Lightbox:o,Modal:r,ProgressBar:l,Sidebar:d,Tabs:h}}(),gadgetui.input=function(){function e(e,t){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.element=e,this.config(t),this.setSaveFunc(),this.setDataProviderRefresh(),this.addControl(),this.addCSS(),gadgetui.util.bind(this.element,this.model),gadgetui.util.bind(this.label,this.model),this.addBehaviors(),this.setStartingValues()}function t(e,t){this.element=e,this.droppedFiles=[],this.configure(t),this.render(t.title),this.setEventHandlers(),this.setDimensions(),this.token=sessionStorage&&this.useTokens?sessionStorage.token:null}function i(e,t){this.element=e,this.items=[],this.config(t),this.setIsMultiLine(),this.addControl(),this.initSource(),this.addMenu(),this.addBindings()}function n(e,t){this.selector=e,this.config(t),this.setSelectOptions(),this.setInitialValue(t),this.addControl(),this.addCSS();var i=gadgetui.util.setStyle;this.hideable?i(this.selector,"display","none"):(i(this.label,"display","none"),i(this.selector,"display","inline-block")),gadgetui.util.bind(this.selector,this.model),gadgetui.util.bind(this.label,this.model),this.addBindings()}function s(e,t){this.emitEvents=!0,this.model=gadgetui.model,this.func,this.selector=e,this.config(t),this.setInitialValue(),this.addControl(),this.setLineHeight(),this.setFont(),this.setWidth(),this.addCSS(),gadgetui.util.bind(this.selector,this.model),this.addBindings()}function o(e){this.configure(e),this.create()}return e.prototype.addControl=function(){var e=gadgetui.util.setStyle;this.comboBox=gadgetui.util.createElement("div"),this.input=gadgetui.util.createElement("input"),this.label=gadgetui.util.createElement("div"),this.inputWrapper=gadgetui.util.createElement("div"),this.selectWrapper=gadgetui.util.createElement("div"),gadgetui.util.addClass(this.comboBox,"gadgetui-combobox"),gadgetui.util.addClass(this.input,"gadgetui-combobox-input"),gadgetui.util.addClass(this.label,"gadgetui-combobox-label"),gadgetui.util.addClass(this.inputWrapper,"gadgetui-combobox-inputwrapper"),gadgetui.util.addClass(this.selectWrapper,"gadgetui-combobox-selectwrapper"),this.element.parentNode.insertBefore(this.comboBox,this.element),this.element.parentNode.removeChild(this.element),this.comboBox.appendChild(this.label),this.selectWrapper.appendChild(this.element),this.comboBox.appendChild(this.selectWrapper),this.inputWrapper.appendChild(this.input),this.comboBox.appendChild(this.inputWrapper),this.label.setAttribute("data-id",this.id),this.label.setAttribute("gadgetui-bind",this.element.getAttribute("gadgetui-bind")),this.label.innerHTML=this.text,this.input.setAttribute("placeholder",this.newOption.text),this.input.setAttribute("type","text"),this.input.setAttribute("name","custom"),e(this.comboBox,"opacity",".0")},e.prototype.addCSS=function(){var e=gadgetui.util.setStyle;gadgetui.util.addClass(this.element,"gadgetui-combobox-select"),e(this.element,"width",this.width),e(this.element,"border",0),e(this.element,"display","inline"),e(this.comboBox,"position","relative");var t,i,n=gadgetui.util.getStyle(this.element),s=this.element.clientWidth,o=0,a=0,r=this.borderWidth;i=gadgetui.util.getNumberValue(this.borderWidth)+4,this.borderRadius>5&&(a=this.borderRadius-5,i=gadgetui.util.getNumberValue(i)+gadgetui.util.getNumberValue(a)),t=s-this.arrowWidth-gadgetui.util.getNumberValue(this.borderRadius)-4,console.log(navigator.userAgent),navigator.userAgent.match(/(Safari)/)&&!navigator.userAgent.match(/(Chrome)/)?(r=this.borderWidth-2,a=a<4?4:this.borderRadius-1,o=1):navigator.userAgent.match(/Edge/)?a=a<1?1:this.borderRadius-4:navigator.userAgent.match(/MSIE/)?a=a<1?1:this.borderRadius-4:navigator.userAgent.match(/Trident/)?a=a<2?2:this.borderRadius-3:navigator.userAgent.match(/Chrome/)&&(a=a<4?4:this.borderRadius-1,o=1),e(this.element,"margin-top",o),e(this.element,"padding-left",a),e(this.inputWrapper,"top",r),e(this.inputWrapper,"left",0),e(this.input,"width",t),e(this.input,"font-size",n.fontSize),e(this.comboBox,"font-size",n.fontSize),e(this.label,"left",i),e(this.label,"font-family",n.fontFamily),e(this.label,"font-size",n.fontSize),e(this.label,"font-weight",n.fontWeight),navigator.userAgent.match(/Firefox/)&&!0===this.scaleIconHeight&&e(this.selectWrapper,"background-size",this.arrowWidth+"px "+inputHeight+"px"),e(this.element,"-webkit-appearance","none"),e(this.element,"-moz-appearance","window"),!0===this.scaleIconHeight&&e(this.element,"background-size",this.arrowWidth+"px "+inputHeight+"px"),e(this.comboBox,"opacity",1),this.hideable?(e(this.inputWrapper,"display","none"),e(this.selectWrapper,"display","none")):(e(this.selectWrapper,"display","inline"),e(this.label,"display","none"),this.element.selectedIndex<=0&&e(this.inputWrapper,"display","inline"))},e.prototype.setSelectOptions=function(){for(var e,t,i,n=this;n.element.options.length>0;)n.element.remove(0);(i=gadgetui.util.createElement("option")).value=n.newOption.id,i.text=n.newOption.text,n.element.add(i),this.dataProvider.data.forEach(function(s){e=s.id,void 0===(t=s.text)&&(t=e),(i=gadgetui.util.createElement("option")).value=e,i.text=t,n.element.add(i)})},e.prototype.find=function(e){var t;for(t=0;t<this.dataProvider.data.length;t++)if(this.dataProvider.data[t].text===e)return this.dataProvider.data[t].id},e.prototype.getText=function(e){var t,i=parseInt(e,10);for(!0===isNaN(i)&&(i=e),t=0;t<this.dataProvider.data.length;t++)if(this.dataProvider.data[t].id===i)return this.dataProvider.data[t].text},e.prototype.showLabel=function(){var e=gadgetui.util.setStyle;e(this.label,"display","inline-block"),e(this.selectWrapper,"display","none"),e(this.inputWrapper,"display","none")},e.prototype.events=["change","click","focus","mouseenter","keyup","mouseleave","blur"],e.prototype.addBehaviors=function(e){var t=this;this.hideable&&(this.comboBox.addEventListener(this.activate,function(){setTimeout(function(){"none"!=t.label.style.display&&(console.log("combo mouseenter "),t.selectWrapper.style.display="inline",t.label.style.display="none",t.element.selectedIndex<=0&&(t.inputWrapper.style.display="inline"))},t.delay)}),this.comboBox.addEventListener("mouseleave",function(){console.log("combo mouseleave "),t.element!=document.activeElement&&t.input!=document.activeElement&&t.showLabel(),"function"==typeof t.fireEvent&&t.fireEvent("mouseleave")})),t.input.addEventListener("click",function(e){console.log("input click "),"function"==typeof t.fireEvent&&t.fireEvent("click")}),t.input.addEventListener("keyup",function(e){if(console.log("input keyup"),13===e.which){var i=gadgetui.util.encode(t.input.value);t.handleInput(i)}"function"==typeof t.fireEvent&&t.fireEvent("keyup")}),this.hideable&&t.input.addEventListener("blur",function(){console.log("input blur"),!0===gadgetui.util.mouseWithin(t.element,gadgetui.mousePosition)?(t.inputWrapper.style.display="none",t.element.focus()):t.showLabel(),"function"==typeof t.fireEvent&&t.fireEvent("blur")}),this.hideable&&this.element.addEventListener("mouseenter",function(e){t.element.style.display="inline","function"==typeof t.fireEvent&&t.fireEvent("mouseenter")}),this.element.addEventListener("click",function(e){console.log("select click"),e.stopPropagation(),"function"==typeof t.fireEvent&&t.fireEvent("click")}),this.element.addEventListener("change",function(e){var i=e.target.selectedIndex>=0?e.target.selectedIndex:0;parseInt(e.target[i].value,10)!==parseInt(t.id,10)&&(console.log("select change"),e.target.selectedIndex>0?(t.inputWrapper.style.display="none",t.setValue(e.target[e.target.selectedIndex].value)):(t.inputWrapper.style.display="block",t.setValue(t.newOption.value),t.input.focus()),gadgetui.util.trigger(t.element,"gadgetui-combobox-change",{id:e.target[e.target.selectedIndex].value,text:e.target[e.target.selectedIndex].innerHTML}),"function"==typeof t.fireEvent&&t.fireEvent("change"))}),this.hideable&&this.element.addEventListener("blur",function(e){console.log("select blur "),e.stopPropagation(),setTimeout(function(){t.input!==document.activeElement&&t.showLabel()},200),"function"==typeof t.fireEvent&&t.fireEvent("blur")})},e.prototype.handleInput=function(e){var t=this.find(e),i=gadgetui.util.setStyle;void 0!==t?(this.element.value=t,this.label.innerText=e,this.element.focus(),this.input.value="",i(this.inputWrapper,"display","none")):void 0===t&&e.length>0&&this.save(e)},e.prototype.triggerSelectChange=function(){console.log("select change");var e=new Event("change",{view:window,bubbles:!0,cancelable:!0});this.element.dispatchEvent(e)},e.prototype.setSaveFunc=function(){if(void 0!==this.save){var e=this.save;this.save=function(t){var i,n,s=this,o=[t];return void 0===this.find(t)&&(console.log("save: "+t),(n=new Promise(function(t,n){o.push(t),o.push(n),i=e.apply(s,o),console.log(i)})).then(function(e){function i(){gadgetui.util.trigger(s.element,"gadgetui-combobox-save",{id:e,text:t}),s.input.value="",s.inputWrapper.style.display="none",s.id=e,s.dataProvider.refresh()}!0===s.animate&&"undefined"!=typeof Velocity?(Velocity(s.selectWrapper,{boxShadow:"0 0 15px "+s.glowColor,borderColor:s.glowColor},s.animateDelay/2,function(){s.selectWrapper.style.borderColor=s.glowColor}),Velocity(s.selectWrapper,{boxShadow:0,borderColor:s.borderColor},s.animateDelay/2,i)):i()}),n.catch(function(e){s.input.value="",s.inputWrapper.hide(),console.log(e),s.dataProvider.refresh()})),i}}},e.prototype.setStartingValues=function(){void 0===this.dataProvider.data?this.dataProvider.refresh():this.setControls()},e.prototype.setControls=function(){console.log(this),this.setSelectOptions(),this.setValue(this.id),this.triggerSelectChange()},e.prototype.setValue=function(e){var t=this.getText(e);console.log("setting id:"+e),this.id=void 0===t?this.newOption.id:e,t=void 0===t?this.newOption.text:t,this.text=t,this.label.innerText=this.text,this.element.value=this.id},e.prototype.setDataProviderRefresh=function(){var e,t,i=this,n=this.dataProvider.refresh;this.dataProvider.refresh=function(){var s=this;return void 0!==n&&((e=new Promise(function(e,i){var o=[s,e,i];t=n.apply(this,o)})).then(function(){gadgetui.util.trigger(i.element,"gadgetui-combobox-refresh"),i.setControls()}),e.catch(function(e){console.log("message"),i.setControls()})),t}},e.prototype.config=function(e){e=void 0===e?{}:e,this.model=void 0===e.model?this.model:e.model,this.emitEvents=void 0===e.emitEvents||e.emitEvents,this.dataProvider=void 0===e.dataProvider?void 0:e.dataProvider,this.save=void 0===e.save?void 0:e.save,this.activate=void 0===e.activate?"mouseenter":e.activate,this.delay=void 0===e.delay?10:e.delay,this.borderWidth=gadgetui.util.getStyle(this.element,"border-width")||1,this.borderRadius=gadgetui.util.getStyle(this.element,"border-radius")||5,this.borderColor=gadgetui.util.getStyle(this.element,"border-color")||"silver",this.arrowWidth=e.arrowWidth||25,this.width=void 0===e.width?150:e.width,this.newOption=void 0===e.newOption?{text:"...",id:0}:e.newOption,this.id=void 0===e.id?this.newOption.id:e.id,this.scaleIconHeight=void 0!==e.scaleIconHeight&&e.scaleIconHeight,this.animate=void 0===e.animate||e.animate,this.glowColor=void 0===e.glowColor?"rgb(82, 168, 236)":e.glowColor,this.animateDelay=void 0===e.animateDelay?500:e.animateDelay,this.border=this.borderWidth+"px "+this.borderStyle+" "+this.borderColor,this.saveBorder=this.borderWidth+"px "+this.borderStyle+" "+this.glowColor,this.hideable=e.hideable||!1},t.prototype.events=["uploadComplete","uploadStart","show","dragover","dragstart","dragenter","dragleave","drop"],t.prototype.render=function(e){(function(){var e=gadgetui.util.setStyle,t=(this.addFileMessage,this.dropMessage),i="",n="gadgetui-fileuploader-uploadIcon";this.uploadClass.length&&(n+=" "+this.uploadClass);var s="";if(s=this.uploadIcon.indexOf(".svg")?'<svg name="gadgetui-fileuploader-uploadIcon" class="'+n+'"><use xlink:href="'+this.uploadIcon+'"/></svg>':'<img name="gadgetui-fileuploader-uploadIcon" class="'+n+'" src="'+this.uploadIcon+'">',this.element.innerHTML='<div class="gadgetui-fileuploader-wrapper"><div name="gadgetui-fileuploader-dropzone" class="gadgetui-fileuploader-dropzone"><div name="gadgetui-fileuploader-filedisplay" class="gadgetui-fileuploader-filedisplay" style="display:none;"></div><div class="gadgetui-fileuploader-dropmessage" name="gadgetui-fileuploader-dropMessageDiv">'+t+'</span></div></div><div class="buttons full"><div class="gadgetui-fileuploader-fileUpload" name="gadgetui-fileuploader-fileUpload"><label>'+s+'<input type="file" name="gadgetui-fileuploader-fileselect" class="gadgetui-fileuploader-upload" title="'+i+'"></label></div></div></div>',!1===this.showUploadButton&&e(this.element.querySelector("input[name='gadgetui-fileuploader-fileselect']"),"display","none"),!1===this.showDropZone&&e(this.element.querySelector("div[name='gadgetui-fileuploader-dropzone']"),"display","none"),!1===this.showUploadIcon){let t=this.element.querySelector("img[name='gadgetui-fileuploader-uploadIcon']");null===t&&(t=this.element.querySelector("svg[name='gadgetui-fileuploader-uploadIcon']")),e(t,"display","none")}this.renderDropZone()}).bind(this)()},t.prototype.configure=function(e){this.message=e.message,this.tags=e.tags,this.uploadURI=e.uploadURI,this.onUploadComplete=e.onUploadComplete,this.willGenerateThumbnails=void 0!==e.willGenerateThumbnails&&null!==e.willGenerateThumbnails&&e.willGenerateThumbnails,this.showUploadButton=void 0===e.showUploadButton||e.showUploadButton,this.showDropZone=void 0===e.showDropZone||e.showDropZone,this.uploadIcon=void 0!==e.uploadIcon?e.uploadIcon:"/node_modules/feather-icons/dist/feather-sprite.svg#image",this.uploadClass=void 0!==e.uploadClass?e.uploadClass:"",this.showUploadIcon=!(void 0===e.uploadIcon||void 0===e.showUploadIcon||!e.showUploadIcon),this.addFileMessage=void 0!==e.addFileMessage?e.addFileMessage:"Add a File",this.dropMessage=void 0!==e.dropMessage?e.dropMessage:"Drop Files Here",this.uploadErrorMessage=void 0!==e.uploadErrorMessage?e.uploadErrorMessage:"Upload error.",this.useTokens=void 0!==e.useTokens&&e.useTokens},t.prototype.setDimensions=function(){gadgetui.util.setStyle,gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.element,"height")),gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.element,"width")),this.element.querySelector("div[class='gadgetui-fileuploader-dropzone']"),this.element.querySelector("div[class='gadgetui-fileuploader-filedisplay']"),this.element.querySelector("div[class~='buttons']")},t.prototype.setEventHandlers=function(){this.element.querySelector("input[name='gadgetui-fileuploader-fileselect']").addEventListener("change",function(e){var t=this.element.querySelector("div[name='gadgetui-fileuploader-dropzone']"),i=this.element.querySelector("div[name='gadgetui-fileuploader-filedisplay']");this.processUpload(e,e.target.files,t,i)}.bind(this))},t.prototype.renderDropZone=function(){let e=this;var t=this.element.querySelector("div[name='gadgetui-fileuploader-dropzone']"),i=this.element.querySelector("div[name='gadgetui-fileuploader-filedisplay']");this.element.addEventListener("dragstart",function(t){t.dataTransfer.setData("text","data"),t.dataTransfer.effectAllowed="copy","function"==typeof e.fireEvent&&e.fireEvent("dragstart")}),t.addEventListener("dragenter",function(i){gadgetui.util.addClass(t,"highlighted"),i.preventDefault(),i.stopPropagation(),"function"==typeof e.fireEvent&&e.fireEvent("dragenter")}),t.addEventListener("dragleave",function(i){i.stopPropagation(),i.preventDefault(),gadgetui.util.removeClass(t,"highlighted"),"function"==typeof e.fireEvent&&e.fireEvent("dragleave")}),t.addEventListener("dragover",function(t){this.handleDragOver(t),t.dataTransfer.dropEffect="copy","function"==typeof e.fireEvent&&e.fireEvent("dragover")}.bind(this)),t.addEventListener("drop",function(n){n.stopPropagation(),n.preventDefault(),"function"==typeof e.fireEvent&&e.fireEvent("drop"),this.processUpload(n,n.dataTransfer.files,t,i)}.bind(this))},t.prototype.processUpload=function(e,t,i,n){var s,o=gadgetui.util.setStyle;this.uploadingFiles=[],o(n,"display","inline");for(var a=0;a<t.length;a++)s=gadgetui.objects.Constructor(gadgetui.display.FileUploadWrapper,[t[a],n,!0]),this.uploadingFiles.push(s),s.on("uploadComplete",function(e){var t;for(t=0;t<this.uploadingFiles.length;t++)this.uploadingFiles[t].id===e.id&&this.uploadingFiles.splice(t,1);0===this.uploadingFiles.length&&(this.showDropZone&&this.show("dropzone"),this.setDimensions()),"function"==typeof this.fireEvent&&this.fireEvent("uploadComplete")}.bind(this));gadgetui.util.removeClass(i,"highlighted"),this.handleFileSelect(this.uploadingFiles,e)},t.prototype.handleFileSelect=function(e,t){t.stopPropagation(),t.preventDefault(),this.willGenerateThumbnails?this.generateThumbnails(e):this.upload(e)},t.prototype.generateThumbnails=function(e){this.upload(e)},t.prototype.upload=function(e){var t=this;e.forEach(function(e){"function"==typeof t.fireEvent&&t.fireEvent("uploadStart"),e.progressbar.start()}),this.uploadFile(e)},t.prototype.uploadFile=function(e){(function(){var t,i,n,s,o,a,r,l,d=[];for(l=0;l<e.length;l++){for(d=[],i=1048576,n=(t=e[l].file).size,s=Math.ceil(n/i),o=0,a=i;o<n;)r=t.hasOwnProperty("mozSlice")?t.mozSlice(o,a):t.hasOwnProperty("webkitSlice")?t.webkitSlice(o,a):t.slice(o,a),d.push(r),a=(o=a)+i;this.uploadChunk(e[l],d,1,s)}}).bind(this)()},t.prototype.uploadChunk=function(e,t,i,n){var s,o=new XMLHttpRequest,a=void 0===this.tags?"":this.tags;o.onreadystatechange=function(){var a;if(4===o.readyState)if(200!==parseInt(o.status,10))this.handleUploadError(o,{},e);else if(s=o.response,console.log(o.getResponseHeader("X-Token")),sessionStorage&&this.useTokens&&(sessionStorage.token=o.getResponseHeader("X-Token"),this.token=sessionStorage.token),i<=n&&e.progressbar.updatePercent(parseInt(i/n*100,10)),i<n)e.id=o.getResponseHeader("X-Id"),i++,this.uploadChunk(e,t,i,n);else{try{a={data:JSON.parse(s)}}catch(t){a={},this.handleUploadError(o,a,e)}null!==a.data&&void 0!==a.data?this.handleUploadResponse(a,e):this.handleUploadError(o,a,e)}}.bind(this),o.open("POST",this.uploadURI,!0),o.setRequestHeader("X-Tags",a),o.setRequestHeader("X-Id",e.id),o.setRequestHeader("X-FileName",e.file.name),o.setRequestHeader("X-FileSize",e.file.size),o.setRequestHeader("X-FilePart",i),o.setRequestHeader("X-Parts",n),sessionStorage&&this.useTokens&&o.setRequestHeader("X-Token",this.token),o.setRequestHeader("X-MimeType",e.file.type||"application/octet-stream"),o.setRequestHeader("X-HasTile",void 0!==e.tile&&e.tile.length>0),o.setRequestHeader("Content-Type","application/octet-stream"),o.send(t[i-1])},t.prototype.handleUploadResponse=function(e,t){var i=gadgetui.objects.Constructor(gadgetui.objects.FileItem,[{mimetype:e.data.mimetype,fileid:e.data.fileId,filename:e.data.filename,filesize:e.data.filesize,tags:e.data.tags,created:e.data.created,createdStr:e.data.created,disabled:e.data.disabled,path:e.data.path}],!1);t.completeUpload(i),void 0!==this.onUploadComplete&&this.onUploadComplete(i)},t.prototype.handleUploadError=function(e,t,i){i.progressbar.progressbox.innerText=this.uploadErrorMessage,i.abortUpload(i)},t.prototype.show=function(e){var t=gadgetui.util.setStyle,i=this.element.querySelector("div[class='gadgetui-fileuploader-dropzone']"),n=this.element.querySelector("div[class='gadgetui-fileuploader-filedisplay']");"dropzone"===e?(t(i,"display","table-cell"),t(n,"display","none")):(t(n,"display","table-cell"),t(i,"display","none"))},t.prototype.handleDragOver=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},i.prototype.events=["change","focus","mouseenter","keyup","mouseleave","blur","click","input","keypress","keydown","menuselect","mousedown"],i.prototype.addControl=function(){this.wrapper=document.createElement("div"),void 0!==this.width&&gadgetui.util.setStyle(this.wrapper,"width",this.width),gadgetui.util.addClass(this.wrapper,"gadgetui-lookuplist-input"),this.element.parentNode.insertBefore(this.wrapper,this.element),this.element.parentNode.removeChild(this.element),this.wrapper.appendChild(this.element)},i.prototype.addMenu=function(){var e=document.createElement("div");gadgetui.util.addClass(e,"gadgetui-lookuplist-menu"),gadgetui.util.setStyle(e,"display","none"),this.menu={element:e},this.wrapper.appendChild(this.menu.element)},i.prototype.initSource=function(){var e,t,i=this;this.datasource.constructor===Array?(e=this.datasource,this.source=function(t,n){n(i.filter(e,t.term))}):"string"==typeof this.datasource?(t=this.datasource,this.source=function(e,n){i.xhr&&i.xhr.abort(),i.xhr=fetch({url:t,data:e,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.datasource},i.prototype.escapeRegex=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},i.prototype._filter=function(e,t){var i=new RegExp(this.escapeRegex(t),"i");return gadgetui.util.grep(e,function(e){return i.test(e.label||e.value||e)})},i.prototype.checkForDuplicate=function(e){var t,i=!1;for(t=0;t<this.items.length;t++)if(this.items[t].value===e.value){i=!0;break}return i},i.prototype.makeUnique=function(e){var t,i=[];for(t=0;t<e.length;t++)this.checkForDuplicate(e[t])||i.push(e[t]);return i},i.prototype.setIsMultiLine=function(){var e=this.element.nodeName.toLowerCase(),t="textarea"===e,i="input"===e;this.isMultiLine=!!t||!i&&this.element.getAttribute("isContentEditable")},i.prototype.addBindings=function(){var e,t,i,n=this,s=this.element.nodeName.toLowerCase();this.isTextarea="textarea"===s,this.isInput="input"===s,this.wrapper.addEventListener("click",function(){n.element.focus(),"function"==typeof n.fireEvent&&n.fireEvent("click")}),this.valueMethod=this.element[this.isTextarea||this.isInput?"value":"innerText"],this.isNewMenu=!0,this.element.setAttribute("autocomplete","off"),this.element.addEventListener("keydown",function(s){if(this.getAttribute("readOnly"))return e=!0,i=!0,void(t=!0);e=!1,i=!1,t=!1;var o=gadgetui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:n.menu.active&&(e=!0,s.preventDefault(),n.menu.select(s));break;case o.BACKSPACE:if(!this.value.length&&n.items.length){var a=this.previousSibling;n.remove(a)}break;case o.TAB:n.menu.active&&n.menu.select(s);break;case o.ESCAPE:"none"!==n.menu.element.style.display&&(this.isMultiLine||this._value(this.term),this.close(s),s.preventDefault());break;default:t=!0,n._searchTimeout(s)}"function"==typeof n.fireEvent&&n.fireEvent("keydown")}),this.element.addEventListener("keypress",function(i){if(e)return e=!1,void(this.isMultiLine&&"none"===n.menu.element.style.display||i.preventDefault());if(!t){var s=gadgetui.keyCode;switch(i.keyCode){case s.PAGE_UP:this._move("previousPage",i);break;case s.PAGE_DOWN:this._move("nextPage",i);break;case s.UP:this._keyEvent("previous",i);break;case s.DOWN:this._keyEvent("next",i)}"function"==typeof n.fireEvent&&n.fireEvent("keypress")}}),this.element.addEventListener("input",function(e){if(i)return i=!1,void e.preventDefault();n._searchTimeout(e),"function"==typeof n.fireEvent&&n.fireEvent("input")}),this.element.addEventListener("focus",function(e){this.selectedItem=null,this.previous=this.value,"function"==typeof n.fireEvent&&n.fireEvent("focus")}),this.element.addEventListener("blur",function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),n.close(e),"function"==typeof n.fireEvent&&n.fireEvent("blur"))}),this.element.addEventListener("change",function(e){n.fireEvent("change")}),this.menu.element.addEventListener("mousedown",function(e){e.preventDefault(),this.cancelBlur=!0,gadgetui.util.delay(function(){delete this.cancelBlur});n.menu.element;"function"==typeof n.fireEvent&&n.fireEvent("mousedown")}),this.menu.element.addEventListener("menuselect",function(e){var t=e.detail,i=n.previous;n.menu.element!==document.activeElement&&(n.menu.element.focus(),n.previous=i,gadgetui.util.delay(function(){n.previous=i,n.selectedItem=t})),n._value(t.value),n.term=n._value(),n.close(e),n.selectedItem=t,n.checkForDuplicate(t)||n.add(t),"function"==typeof n.fireEvent&&n.fireEvent("menuselect")})},i.prototype._renderItem=function(e){var t,i=document.createElement("div");return gadgetui.util.addClass(i,"gadgetui-lookuplist-input-item-wrapper"),t=document.createElement("div"),gadgetui.util.addClass(t,"gadgetui-lookuplist-input-item"),t.innerHTML=this.labelRenderer(e),i.appendChild(t),i},i.prototype._renderItemCancel=function(e,t){var i=gadgetui.util.setStyle,n=document.createElement("span"),s=gadgetui.util.getNumberValue(gadgetui.util.getStyle(t,"width"))+6;return gadgetui.util.addClass(n,"oi"),n.setAttribute("data-glyph","circle-x"),i(n,"font-size",12),i(n,"opacity",".5"),i(n,"left",s),i(n,"position","absolute"),i(n,"cursor","pointer"),i(n,"top",3),n},i.prototype.add=function(e){var t,i,n,s,o=this;(n=this.itemRenderer(e)).setAttribute("data-value",e.value),this.wrapper.insertBefore(n,this.element),void 0!==(s=this.itemCancelRenderer(e,n))&&(n.appendChild(s),s.addEventListener("click",function(e){o.remove(this.parentNode)})),this.element.value="",this.items.push(e),!0===this.emitEvents&&gadgetui.util.trigger(this.element,"gadgetui-lookuplist-input-add",e),void 0!==this.func&&this.func(e,"add"),void 0!==this.model&&null!==(t=this.element.getAttribute("gadgetui-bind"))&&void 0!==t&&(typeof(i=this.model.get(t))===Array&&(i=[]),i.push(e),this.model.set(t,i))},i.prototype.remove=function(e){var t,i,n,s=this,o=e.getAttribute("data-value");for(e.parentNode.removeChild(e),t=0;t<this.items.length;t++)this.items[t].value===o&&this.items.splice(t,1);void 0!==this.model&&null!==(i=this.element.getAttribute("gadgetui-bind"))&&void 0!==i&&(n=this.model.get(i)).forEach(function(e,t){if(e.value===o)return n.splice(t,1),void 0!==s.func&&s.func(e,"remove"),!0===s.emitEvents&&gadgetui.util.trigger(s.element,"gadgetui-lookuplist-input-remove",e),s.model.set(i,n),!1})},i.prototype.reset=function(){for(;this.wrapper.firstChild&&this.wrapper.firstChild!==this.element;)this.wrapper.removeChild(this.wrapper.firstChild);if(this.items=[],void 0!==this.model){var e=this.element.getAttribute("gadgetui-bind");this.model.set(e,[])}},i.prototype.destroy=function(){clearTimeout(this.searching),this.menu.element.remove(),this.liveRegion.remove()},i.prototype._setOption=function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},i.prototype._appendTo=function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?$(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},i.prototype._searchTimeout=function(e){var t=this;clearTimeout(this.searching),this.searching=gadgetui.util.delay(function(){var i=this.term===t.element.value,n="none"!==t.menu.element.style.display,s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;i&&(!i||n||s)||(t.selectedItem=null,t.search(null,e))},this.delay)},i.prototype.search=function(e,t){return e=null!=e?e:this.element.value,this.term=this._value(),e.length<this.minLength?this.close(t):this._search(e)},i.prototype._search=function(e){this.pending++,this.cancelSearch=!1,this.source({term:e},this._response())},i.prototype._response=function(){var e=this;++this.requestIndex;return function(){return function(t){e.__response(t),e.pending--}.apply(e,arguments)}},i.prototype.__response=function(e){(e=this.makeUnique(e))&&e.length&&(e=this._normalize(e)),this.element.dispatchEvent(new CustomEvent("response",{content:e})),!this.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this.element.dispatchEvent(new Event("open"))):this._close()},i.prototype.close=function(e){this.cancelSearch=!0,this._close(e)},i.prototype._close=function(e){"none"!==this.menu.element.style.display&&(this.menu.element.style.display="none",this.menu.element.blur(),this.isNewMenu=!0)},i.prototype._normalize=function(e){return e.length&&e[0].label&&e[0].value?e:e.map(function(e){return"string"==typeof e?{label:e,value:e}:(e.label=e.label||e.value,e.value=e.value||e.label,e)})},i.prototype._suggest=function(e){for(var t=this.menu.element;t.firstChild;)t.removeChild(t.firstChild);this._renderMenu(e),this.isNewMenu=!0,t.style.display="block",this._resizeMenu(),this.position.of=this.element},i.prototype._resizeMenu=function(){this.menu.element},i.prototype._renderMenu=function(e){var t,i=Math.min(this.maxSuggestions,e.length);for(t=0;t<i;t++)this._renderItemData(e[t])},i.prototype._renderItemData=function(e){var t=this,i=this.menuItemRenderer(e);i.addEventListener("click",function(i){var n=new CustomEvent("menuselect",{detail:e});t.menu.element.dispatchEvent(n)}),this.menu.element.appendChild(i)},i.prototype._renderMenuItem=function(e){var t=document.createElement("div");return gadgetui.util.addClass(t,"gadgetui-lookuplist-item"),t.setAttribute("value",e.value),t.innerText=this.labelRenderer(e),t},i.prototype._renderLabel=function(e){return e.label},i.prototype._move=function(e,t){if("none"===!this.menu.element.style.display)return this.menu.element.isFirstItem()&&/^previous/.test(e)||this.menu.element.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},i.prototype.widget=function(){return this.menu.element},i.prototype._value=function(){return this.isInput?this.element.value:this.element.innerText},i.prototype._keyEvent=function(e,t){this.isMultiLine&&"none"===this.menu.element.style.display||(this._move(e,t),t.preventDefault())},i.prototype.config=function(e){e=void 0===e?{}:e,void 0!==this.element.getAttribute("gadgetui-bind")&&(this.model=void 0===e.model?gadgetui.model:e.model),this.width=void 0===e.width?void 0:e.width,this.func=void 0===e.func?void 0:e.func,this.filter=void 0===e.filter?this._filter:e.filter,this.labelRenderer=void 0===e.labelRenderer?this._renderLabel:e.labelRenderer,this.itemRenderer=void 0===e.itemRenderer?this._renderItem:e.itemRenderer,this.menuItemRenderer=void 0===e.menuItemRenderer?this._renderMenuItem:e.menuItemRenderer,this.itemCancelRenderer=void 0===e.itemCancelRenderer?this._renderItemCancel:e.itemCancelRenderer,this.emitEvents=void 0===e.emitEvents||e.emitEvents,this.datasource=void 0===e.datasource?void 0===e.lookupList||e.lookupList:e.datasource,this.minLength=void 0===e.minLength?0:e.minLength,this.disabled=void 0!==e.disabled&&e.disabled,this.maxSuggestions=void 0===e.maxSuggestions?20:e.maxSuggestions,this.position=void 0===e.position?{my:"left top",at:"left bottom",collision:"none"}:e.position,this.autoFocus=void 0!==e.autoFocus&&e.autoFocus,this.requestIndex=0},n.prototype.events=["change","focus","mouseenter","mouseleave","blur"],n.prototype.setInitialValue=function(e){this.value=e.value||{id:this.selector.options[this.selector.selectedIndex||0].value,text:this.selector.options[this.selector.selectedIndex||0].innerHTML},this.selector.value=this.value.id},n.prototype.addControl=function(){this.wrapper=document.createElement("div"),this.label=document.createElement("div"),gadgetui.util.addClass(this.wrapper,"gadgetui-selectinput-div"),gadgetui.util.addClass(this.label,"gadgetui-selectinput-label"),this.label.setAttribute("gadgetui-bind",this.selector.getAttribute("gadgetui-bind")),this.label.innerHTML=this.value.text,this.selector.parentNode.insertBefore(this.wrapper,this.selector),this.wrapper=this.selector.previousSibling,this.selector.parentNode.removeChild(this.selector),this.wrapper.appendChild(this.selector),this.selector.parentNode.insertBefore(this.label,this.selector)},n.prototype.setSelectOptions=function(){var e,t,i,n=this;if(null!==this.selector.getAttribute("gadgetui-bind-options")||void 0!==this.dataProvider){for(;n.selector.options.length>0;)n.selector.remove(0);if(null!==this.selector.getAttribute("gadgetui-bind-options"))this.model.get(this.selector.getAttribute("gadgetui-bind-options")).forEach(function(e){var t=document.createElement("option");"object"==typeof e?(t.value=e.id,t.text=e.text):t.text=e,n.selector.add(t)});else void 0!==this.dataProvider&&this.dataProvider.data.forEach(function(s){e=s.id,void 0===(t=s.text)&&(t=e),(i=gadgetui.util.createElement("option")).value=e,i.text=t,n.selector.add(i)})}},n.prototype.addCSS=function(){var e,t,i=gadgetui.util.setStyle,n=gadgetui.util.getStyle(this.selector);i(this.selector,"min-width","100px"),i(this.selector,"font-size",n.fontSize),t=gadgetui.util.getStyle(this.selector.parentNode),e=gadgetui.util.getNumberValue(t.height)-2,this.label.setAttribute("style",""),i(this.label,"padding-top","2px"),i(this.label,"height",e+"px"),i(this.label,"margin-left","9px"),navigator.userAgent.match(/Edge/)?i(this.selector,"margin-left","5px"):navigator.userAgent.match(/MSIE/)&&(i(this.selector,"margin-top","0px"),i(this.selector,"margin-left","5px"))},n.prototype.addBindings=function(){var e=this,t=gadgetui.util.setStyle;this.hideable&&(this.label.addEventListener(this.activate,function(i){t(e.label,"display","none"),t(e.selector,"display","inline-block"),i.preventDefault(),"function"==typeof e.fireEvent&&e.fireEvent(e.activate)}),this.selector.addEventListener("blur",function(i){t(e.label,"display","inline-block"),t(e.selector,"display","none"),"function"==typeof e.fireEvent&&e.fireEvent("blur")})),this.selector.addEventListener("change",function(t){setTimeout(function(){var i=t.target.value,n=t.target[t.target.selectedIndex].innerHTML;0===i.trim().length&&(i=0),e.label.innerText=n,void 0!==e.model&&void 0===e.selector.getAttribute("gadgetui-bind")&&e.model.set(this.name,{id:i,text:n}),!0===e.emitEvents&&gadgetui.util.trigger(e.selector,"gadgetui-input-change",{id:i,text:n}),void 0!==e.func&&e.func({id:i,text:n}),e.value={id:i,text:n}},100),"function"==typeof e.fireEvent&&e.fireEvent("change")}),this.hideable&&this.selector.addEventListener("mouseleave",function(){e.selector!==document.activeElement&&(t(e.label,"display","inline-block"),t(e.selector,"display","none")),"function"==typeof e.fireEvent&&e.fireEvent("mouseleave")})},n.prototype.config=function(e){e=void 0===e?{}:e,this.model=void 0===e.model?void 0:e.model,this.dataProvider=void 0===e.dataProvider?void 0:e.dataProvider,this.func=void 0===e.func?void 0:e.func,this.emitEvents=void 0===e.emitEvents||e.emitEvents,this.activate=void 0===e.activate?"mouseenter":e.activate,this.hideable=e.hideable||!1},s.prototype.events=["change","focus","mouseenter","keyup","mouseleave","blur"],s.prototype.addControl=function(){this.hideable&&(this.blockSize=gadgetui.util.getStyle(this.selector,"block-size"),gadgetui.util.setStyle(this.selector,"block-size",this.blockSize),this.selector.classList.add(this.browserHideBorderCSS))},s.prototype.setInitialValue=function(){var e=this.selector.value,t=this.selector.getAttribute("placeholder");0===e.length&&(e=null!==t&&void 0!==t&&t.length>0?t:" ... "),this.value=e},s.prototype.setLineHeight=function(){var e=this.selector.offsetHeight;this.lineHeight=e},s.prototype.setFont=function(){var e=gadgetui.util.getStyle(this.selector),t=e.fontFamily+" "+e.fontSize+" "+e.fontWeight+" "+e.fontVariant;this.font=t},s.prototype.setWidth=function(){this.width=gadgetui.util.textWidth(this.selector.value,this.font)+10,10===this.width&&(this.width=this.maxWidth)},s.prototype.addCSS=function(){gadgetui.util.getStyle(this.selector);var e=gadgetui.util.setStyle;gadgetui.util.addClass(this.selector,"gadgetui-textinput"),this.maxWidth>10&&!0===this.enforceMaxWidth&&e(this.selector,"max-width",this.maxWidth)},s.prototype.setControlWidth=function(e){var t=parseInt(gadgetui.util.textWidth(e,this.font),10),i=gadgetui.util.setStyle;t<this.minWidth&&(t=this.minWidth),i(this.selector,"width",t+30+"px")},s.prototype.addBindings=function(){var e=this;this.selector.addEventListener("mouseenter",function(t){t.preventDefault(),e.hideable&&this.classList.remove(e.browserHideBorderCSS),"function"==typeof e.fireEvent&&e.fireEvent("mouseenter")}),this.selector.addEventListener("focus",function(t){t.preventDefault(),e.hideable&&this.classList.remove(e.browserHideBorderCSS),"function"==typeof e.fireEvent&&e.fireEvent("focus")}),this.selector.addEventListener("keyup",function(t){13===parseInt(t.keyCode,10)&&this.blur(),e.setControlWidth(this.value),"function"==typeof e.fireEvent&&e.fireEvent("keyup")}),this.selector.addEventListener("change",function(t){setTimeout(function(){var i,n=t.target.value;0===n.length&&void 0!==e.selector.getAttribute("placeholder")&&(n=e.selector.getAttribute("placeholder")),i=gadgetui.util.textWidth(n,e.font),e.maxWidth<i&&(n=gadgetui.util.fitText(n,e.font,e.maxWidth)),void 0!==e.model&&void 0===e.selector.getAttribute("gadgetui-bind")&&e.model.set(e.selector.name,t.target.value),!0===e.emitEvents&&gadgetui.util.trigger(e.selector,"gadgetui-input-change",{text:t.target.value}),void 0!==e.func&&e.func({text:t.target.value}),"function"==typeof e.fireEvent&&e.fireEvent("change")},200)}),this.hideable&&(this.selector.addEventListener("mouseleave",function(){gadgetui.util.setStyle;this!==document.activeElement&&this.classList.add(e.browserHideBorderCSS),"function"==typeof e.fireEvent&&e.fireEvent("mouseleave")}),this.selector.addEventListener("blur",function(){(0,gadgetui.util.setStyle)(e.selector,"maxWidth",e.maxWidth),this.classList.add(e.browserHideBorderCSS),"function"==typeof e.fireEvent&&e.fireEvent("blur")}))},s.prototype.config=function(e){e=void 0===e?{}:e,this.borderColor=void 0===e.borderColor?"#d0d0d0":e.borderColor,this.useActive=void 0!==e.useActive&&e.useActive,this.model=void 0===e.model?this.model:e.model,this.func=void 0===e.func?void 0:e.func,this.emitEvents=void 0===e.emitEvents||e.emitEvents,this.activate=void 0===e.activate?"mouseenter":e.activate,this.delay=void 0===e.delay?10:e.delay,this.minWidth=void 0===e.minWidth?100:e.minWidth,this.enforceMaxWidth=void 0!==e.enforceMaxWidth&&e.enforceMaxWidth,this.hideable=e.hideable||!1,this.maxWidth=e.maxWidth||gadgetui.util.getNumberValue(gadgetui.util.getStyle(this.selector.parentNode).width);let t=gadgetui.util.checkBrowser();this.browserHideBorderCSS="gadget-ui-textinput-hideBorder-"+t},o.prototype.events=["changed"],o.prototype.configure=function(e){this.selector=e.selector,this.parentSelector=e.parentSelector,this.shape=void 0===e.shape?"square":e.shape,this.value=1===parseInt(e.initialValue,10)?1:0},o.prototype.create=function(){if(this.element,void 0!==this.selector)this.element=document.querySelector(this.selector);else{let e=document.createElement("input");e.type="range",e.min=0,e.max=1,document.querySelector(this.parentSelector).appendChild(e),this.element=e}this.element.value=this.value,this.element.classList.add("gadget-ui-toggle"),"round"===this.shape&&this.element.classList.add("gadget-ui-toggle-round"),0===this.value&&this.element.classList.add("gadget-ui-toggle-off"),this.element.addEventListener("click",function(){1===this.value?(this.value=0,this.element.classList.add("gadget-ui-toggle-off")):(this.value=1,this.element.classList.remove("gadget-ui-toggle-off")),this.element.value=this.value,"function"==typeof this.fireEvent&&this.fireEvent("changed")}.bind(this))},{FileUploader:t,TextInput:s,SelectInput:n,ComboBox:e,LookupListInput:i,Toggle:o}}(),gadgetui.objects=function(){var e={on:function(e,t){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this},off:function(e){return this.events[e]=[],this},fireEvent:function(e,t){var i=this;void 0!==this.events[e]&&this.events[e].forEach(function(e){e(i,t)})},getAll:function(){return[{name:"on",func:this.on},{name:"off",func:this.off},{name:"fireEvent",func:this.fireEvent}]}};function t(e){this.set(e)}return t.prototype.set=function(e){this.fileid=void 0!==e.fileid?e.fileid:"",this.filename=void 0!==e.filename?e.filename:"",void 0!==e.filename?(this.filenameabbr=e.filename.substr(0,25),e.filename.length>25&&(this.filenameabbr=this.filenameabbr+"...")):this.filenameabbr="",this.filesize=void 0!==e.filesize?e.filesize:"",this.tags=void 0!==e.tags?e.tags:"",this.path=void 0!==e.path?e.path:"",this.created=void 0!==e.created?e.created:"",this.createdStr=void 0!==e.created?e.createdStr:"",this.disabled=void 0!==e.disabled?e.disabled:0,this.mimetype=void 0!==e.mimetype?e.mimetype:"application/x-unknown",this.tile=void 0!==e.tile?e.tile:""},{Constructor:function(t,i,n){var s,o,a,r;if(!0===n)for(r=e.getAll(),s=0;s<r.length;s++)void 0===t.prototype[r[s].name]&&(t.prototype[r[s].name]=r[s].func);if(a=Object.create(t.prototype),void 0===(o=t.apply(a,i))&&(o=a),!0===n)for(o.events={},s=0;s<t.prototype.events.length;s++)o.events[t.prototype.events[s]]=[];return o},EventBindings:e,FileItem:t}}(),gadgetui.util=function(){const e={debug:!1,align:"center",vAlign:"middle",fontSize:14,fontWeight:"",fontStyle:"",fontVariant:"",font:"Arial",lineHeight:null,justify:!1};return{split:function(e){return e.split(/,\s*/)},extractLast:function(e){return this.split(e).pop()},getNumberValue:function(e){return isNaN(Number(e))?Number(e.substring(0,e.length-2)):e},checkBrowser:function(){var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t="undefined"!=typeof InstallTrigger,i=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),n=!!document.documentMode,s=!n&&!!window.StyleMedia,o=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),a=o&&-1!=navigator.userAgent.indexOf("Edg"),r=(o||e)&&!!window.CSS;let l="generic";return e&&(l="opera"),t&&(l="firefox"),i&&(l="safari"),n&&(l="ie"),s&&(l="edge"),o&&(l="chrome"),a&&(l="edgechromium"),r&&(l="blink"),l},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass:function(e,t){if(e.classList)e.classList.remove(t);else{var i=e.className,n=new RegExp(t,"g");i.replace(n,""),e.className=i}},getOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},getParentsUntil:function(e,t,i){var n=[];if(t)var s=t.charAt(0);if(i)var o=i.charAt(0);for(;e&&e!==document;e=e.parentNode){if(t){if("."===s&&e.classList.contains(t.substr(1)))break;if("#"===s&&e.id===t.substr(1))break;if("["===s&&e.hasAttribute(t.substr(1,t.length-1)))break;if(e.tagName.toLowerCase()===t)break}i?("."===o&&e.classList.contains(i.substr(1))&&n.push(e),"#"===o&&e.id===i.substr(1)&&n.push(e),"["===o&&e.hasAttribute(i.substr(1,i.length-1))&&n.push(e),e.tagName.toLowerCase()===i&&n.push(e)):n.push(e)}return 0===n.length?null:n},getRelativeParentOffset:function(e){var t,i,n=gadgetui.util.getParentsUntil(e,"body"),s=0,o=0;for(t=0;t<n.length;t++)"relative"===n[t].style.position&&((i=gadgetui.util.getOffset(n[t])).left>s&&(s=i.left),i.top>o&&(o=i.top));return{left:s,top:o}},Id:function(){return(100*Math.random()).toString().replace(/\./g,"")},bind:function(e,t){var i=e.getAttribute("gadgetui-bind");void 0!==i&&null!==i&&void 0!==t&&t.bind(i,e)},mouseCoords:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}},mouseWithin:function(e,t){var i=e.getBoundingClientRect();return t.x>=i.left&&t.x<=i.right&&t.y>=i.top&&t.y<=i.bottom},getStyle:function(e,t){return void 0!==window.getComputedStyle?void 0!==t?window.getComputedStyle(e,null).getPropertyValue(t):window.getComputedStyle(e,null):void 0!==t?e.currentStyle[t]:e.currentStyle},draggable:function(e){var t=null,i=0,n=0,s=0,o=0;e.onmousedown=function(){return s=i-(t=this).offsetLeft,o=n-t.offsetTop,!1},document.onmousemove=function(e){i=document.all?window.event.clientX:e.pageX,n=document.all?window.event.clientY:e.pageY,null!==t&&(t.style.left=i-s+"px",t.style.top=n-o+"px")},document.onmouseup=function(i){console.log(i);var n=new CustomEvent("drag_end",{detail:{top:gadgetui.util.getStyle(e,"top"),left:gadgetui.util.getStyle(e,"left")}});e.dispatchEvent(n),t=null}},textWidth:function(e,t){gadgetui.util.textWidthEl||(gadgetui.util.textWidthEl=document.createElement("div"),gadgetui.util.textWidthEl.setAttribute("id","gadgetui-textWidth"),gadgetui.util.textWidthEl.setAttribute("style","display: none;"),document.body.appendChild(gadgetui.util.textWidthEl));var i,n=e;return n.length>0&&(gadgetui.util.textWidthEl.innerText=n,n=void 0===n?"":n.replace(/\s/g,"&nbsp;")),gadgetui.util.textWidthEl.innertText=n,gadgetui.util.textWidthEl.style.fontFamily=t.fontFamily,gadgetui.util.textWidthEl.style.fontSize=t.fontSize,gadgetui.util.textWidthEl.style.fontWeight=t.fontWeight,gadgetui.util.textWidthEl.style.fontVariant=t.fontVariant,gadgetui.util.textWidthEl.style.display="inline",i=gadgetui.util.textWidthEl.offsetWidth,gadgetui.util.textWidthEl.style.display="none",i},fitText:function(e,t,i){var n,s=gadgetui.util.TextWidth(e,t),o=gadgetui.util.TextWidth("...",t);if(s<i)return e;for(n=Math.floor(e.length/2)-1;s+o>=i;)e=e.slice(0,n)+e.slice(n+1,e.length),n=Math.floor(e.length/2)-1,s=gadgetui.util.TextWidth(e,font);for(n=Math.floor(e.length/2)-1,e=e.slice(0,n)+"..."+e.slice(n,e.length);" "===e.substring(n-1,n);)e=e.slice(0,n-1)+e.slice(n,e.length),n-=1;for(;" "===e.substring(n+3,n+4);)e=e.slice(0,n+3)+e.slice(n+4,e.length),n-=1;return e},createElement:function(e){var t=document.createElement(e);return t.setAttribute("style",""),t},addStyle:function(e,t){var i=e.getAttribute("style"),n=null!==i?i:"";e.setAttribute("style",n+" "+t+";")},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},setStyle:function(e,t,i){var n,s=e.getAttribute("style"),o=null!==s?s:"",a=new RegExp("("+t+")+ *\\:[^\\;]*\\;","g");if(!0===gadgetui.util.isNumeric(i))switch(t){case"opacity":case"z-index":case"font-weight":break;default:i+="px"}n=o.search(a)>=0?o.replace(a,t+": "+i+";"):o+" "+t+": "+i+";",e.setAttribute("style",n)},encode:function(e){return e},trigger:function(e,t,i){e.dispatchEvent(new CustomEvent(t,{detail:i}))},getMaxZIndex:function(){for(var e=document.querySelectorAll("*"),t=0,i=0;i<e.length;i++){var n=gadgetui.util.getStyle(e[i],"z-index");n>t&&"auto"!=n&&(t=n)}return t},grep:function(e,t,i){for(var n=[],s=0,o=e.length,a=!i;s<o;s++)!t(e[s],s)!==a&&n.push(e[s]);return n},delay:function(e,t){var i=this;return setTimeout(function(){return e.apply(i,arguments)},t||0)},contains:function(e,t){for(var i=e.parentNode;null!=i;){if(i==t)return!0;i=i.parentNode}return!1},B:function({ctx:e,line:t,spaceWidth:i,spaceChar:n,width:s}){const o=t.trim(),a=o.split(/\s+/),r=a.length-1;if(0===r)return o;const l=(s-e.measureText(a.join("")).width)/i,d=Math.floor(l/r);if(l<1)return o;const h=n.repeat(d);return a.join(h)},splitText:function({ctx:e,text:t,justify:i,width:n}){const s=new Map,o=t=>{let i=s.get(t);return void 0!==i||(i=e.measureText(t).width,s.set(t,i)),i};let a=[],r=t.split("\n\t\t  ");const l=i?o(""):0;let d=0,h=0;for(const t of r){let s=o(t);const r=t.length;if(s<=n){a.push(t);continue}let u,c,p=t,g="";for(;s>n;){if(d++,(c=0===(u=h)?0:o(t.substring(0,u)))<n)for(;c<n&&u<r&&(u++,c=o(p.substring(0,u)),u!==r););else if(c>n)for(;c>n&&(u=Math.max(1,u-1),c=o(p.substring(0,u)),0!==u&&1!==u););if(h=Math.round(h+(u-h)/d),--u>0){let e=u;if(" "!=p.substring(e,e+1)){for(;" "!=p.substring(e,e+1)&&e>=0;)e--;e>0&&(u=e)}}0===u&&(u=1),g=p.substring(0,u),g=i?gadgetui.util.B({ctx:e,line:g,spaceWidth:l,spaceChar:"",width:n}):g,a.push(g),s=o(p=p.substring(u))}s>0&&(g=i?gadgetui.util.B({ctx:e,line:p,spaceWidth:l,spaceChar:"",width:n}):p,a.push(g))}return a},getTextHeight:function({ctx:e,text:t,style:i}){const n=e.textBaseline,s=e.font;e.textBaseline="bottom",e.font=i;const{actualBoundingBoxAscent:o}=e.measureText(t);return e.textBaseline=n,e.font=s,o},drawText:function(t,i,n){const{width:s,height:o,x:a,y:r}=n,l={...e,...n};if(s<=0||o<=0||l.fontSize<=0)return{height:0};const d=a+s,h=r+o,{fontStyle:u,fontVariant:c,fontWeight:p,fontSize:g,font:f}=l,m=`${u} ${c} ${p} ${g}px ${f}`;t.font=m;let b,v=r+o/2+l.fontSize/2;"right"===l.align?(b=d,t.textAlign="right"):"left"===l.align?(b=a,t.textAlign="left"):(b=a+s/2,t.textAlign="center");const y=gadgetui.util.splitText({ctx:t,text:i,justify:l.justify,width:s}),w=l.lineHeight?l.lineHeight:gadgetui.util.getTextHeight({ctx:t,text:"M",style:m}),x=w*(y.length-1),E=x/2;let C=r;if("top"===l.vAlign?(t.textBaseline="top",v=r):"bottom"===l.vAlign?(t.textBaseline="bottom",v=h-x,C=h):(t.textBaseline="bottom",C=r+o/2,v-=E),y.forEach(e=>{e=e.trim(),t.fillText(e,b,v),v+=w}),l.debug){const e="#0C8CE9";t.lineWidth=1,t.strokeStyle=e,t.strokeRect(a,r,s,o),t.lineWidth=1,t.strokeStyle=e,t.beginPath(),t.moveTo(b,r),t.lineTo(b,h),t.stroke(),t.strokeStyle=e,t.beginPath(),t.moveTo(a,C),t.lineTo(d,C),t.stroke()}return{height:x+w}}}}();
//# sourceMappingURL=../gadget-ui.min.js.map